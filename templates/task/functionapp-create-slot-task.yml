parameters:
  - name: slotName
    type: string
    default: "staging"
  - name: resourceGroup
    type: string
  - name: functionAppName
    type: string
  - name: azureSubscription
    type: string

steps:
  - task: AzureCLI@2
    displayName: Create slot in '${{parameters.functionAppName}}'
    inputs:
      azureSubscription: ${{parameters.azureSubscription}}
      scriptType: bash
      scriptLocation: inlineScript
      inlineScript: |
        echo "Creating extra deployment slot with name: ${{parameters.slotName}}"
        az functionapp deployment slot create --name ${{parameters.functionAppName}} --resource-group ${{parameters.resourceGroup}} --slot ${{parameters.slotName}}
